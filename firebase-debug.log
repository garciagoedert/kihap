[debug] [2025-10-22T10:54:55.470Z] ----------------------------------------------------------------------
[debug] [2025-10-22T10:54:55.474Z] Command:       /Users/goedert/.nvm/versions/node/v22.19.0/bin/node /Users/goedert/.nvm/versions/node/v22.19.0/bin/firebase serve
[debug] [2025-10-22T10:54:55.474Z] CLI Version:   14.17.0
[debug] [2025-10-22T10:54:55.475Z] Platform:      darwin
[debug] [2025-10-22T10:54:55.475Z] Node Version:  v22.19.0
[debug] [2025-10-22T10:54:55.475Z] Time:          Wed Oct 22 2025 07:54:55 GMT-0300 (Horário Padrão de Brasília)
[debug] [2025-10-22T10:54:55.475Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-10-22T10:54:55.726Z] Object "/functions" in "firebase.json" has unknown property: {"additionalProperty":"cors"}
[debug] [2025-10-22T10:54:55.726Z] Object "/functions" in "firebase.json" is missing required property: {"missingProperty":"remoteSource"}
[debug] [2025-10-22T10:54:55.727Z] Field "/functions" in "firebase.json" is possibly invalid: must be array
[debug] [2025-10-22T10:54:55.727Z] Field "/functions" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-10-22T10:54:55.731Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-10-22T10:54:55.731Z] > authorizing via signed-in user (comercial@kihap.com.br)
[debug] [2025-10-22T10:54:55.732Z] [iam] checking project intranet-kihap for permissions ["firebase.projects.get"]
[debug] [2025-10-22T10:54:55.732Z] Checked if tokens are valid: true, expires at: 1761134042788
[debug] [2025-10-22T10:54:55.732Z] Checked if tokens are valid: true, expires at: 1761134042788
[debug] [2025-10-22T10:54:55.733Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/intranet-kihap:testIamPermissions [none]
[debug] [2025-10-22T10:54:55.734Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/intranet-kihap:testIamPermissions x-goog-quota-user=projects/intranet-kihap
[debug] [2025-10-22T10:54:55.734Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/intranet-kihap:testIamPermissions {"permissions":["firebase.projects.get"]}
[debug] [2025-10-22T10:54:56.781Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/intranet-kihap:testIamPermissions 200
[debug] [2025-10-22T10:54:56.782Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/intranet-kihap:testIamPermissions {"permissions":["firebase.projects.get"]}
[debug] [2025-10-22T10:54:56.782Z] Checked if tokens are valid: true, expires at: 1761134042788
[debug] [2025-10-22T10:54:56.783Z] Checked if tokens are valid: true, expires at: 1761134042788
[debug] [2025-10-22T10:54:56.783Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/intranet-kihap [none]
[debug] [2025-10-22T10:54:57.015Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/intranet-kihap 200
[debug] [2025-10-22T10:54:57.016Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/intranet-kihap {"projectNumber":"1055939458006","projectId":"intranet-kihap","lifecycleState":"ACTIVE","name":"Intranet-kihap","labels":{"firebase":"enabled","firebase-core":"disabled","generative-language":"enabled"},"createTime":"2025-08-24T21:36:32.438489Z","parent":{"type":"organization","id":"97020421655"}}
[info] 
[info] === Serving from '/Users/goedert/Documents/GITHUB/KIHAP/novokihap'...
[info] 
[debug] [2025-10-22T10:54:57.035Z] defaultcredentials: writing to file /Users/goedert/.config/firebase/comercial_kihap_com.br_application_default_credentials.json
[debug] [2025-10-22T10:54:57.037Z] Setting GAC to /Users/goedert/.config/firebase/comercial_kihap_com.br_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/goedert/.config/firebase/comercial_kihap_com.br_application_default_credentials.json"}}
[debug] [2025-10-22T10:54:57.038Z] Checked if tokens are valid: true, expires at: 1761134042788
[debug] [2025-10-22T10:54:57.038Z] Checked if tokens are valid: true, expires at: 1761134042788
[debug] [2025-10-22T10:54:57.038Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/intranet-kihap/adminSdkConfig [none]
[debug] [2025-10-22T10:54:57.670Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/intranet-kihap/adminSdkConfig 200
[debug] [2025-10-22T10:54:57.670Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/intranet-kihap/adminSdkConfig {"projectId":"intranet-kihap","storageBucket":"intranet-kihap.firebasestorage.app"}
[info] i  functions: Watching "/Users/goedert/Documents/GITHUB/KIHAP/novokihap/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/goedert/Documents/GITHUB/KIHAP/novokihap/functions\" for Cloud Functions..."}}
[debug] [2025-10-22T10:54:57.709Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-10-22T10:54:58.745Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "axios": "^1.6.8",
    "cors": "^2.8.5",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-10-22T10:54:58.745Z] Building nodejs source
[debug] [2025-10-22T10:54:58.745Z] Failed to find version of module node: reached end of search path /Users/goedert/Documents/GITHUB/KIHAP/novokihap/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "22". Using node@22 from host. 
[debug] [2025-10-22T10:54:58.748Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-10-22T10:54:58.758Z] Found firebase-functions binary at '/Users/goedert/Documents/GITHUB/KIHAP/novokihap/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8453

[debug] [2025-10-22T10:54:59.610Z] Got response from /__/functions.yaml {"endpoints":{"updateUserPassword":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"updateUserPassword"},"getMemberData":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getMemberData"},"listAllMembers":{"platform":"gcfv1","labels":{},"availableMemoryMb":1024,"timeoutSeconds":540,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"listAllMembers"},"updateMemberData":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"updateMemberData"},"inviteStudent":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"inviteStudent"},"updateStudentPermissions":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"updateStudentPermissions"},"getActiveContractsCount":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":120,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getActiveContractsCount"},"getEvoUnits":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getEvoUnits"},"getPublicEvoUnits":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getPublicEvoUnits"},"getActivitiesSchedule":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getActivitiesSchedule"},"getDailyEntries":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getDailyEntries"},"getContractsEvolution":{"platform":"gcfv1","labels":{},"availableMemoryMb":1024,"timeoutSeconds":120,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getContractsEvolution"},"snapshotDailyEvoData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"scheduleTrigger":{"schedule":"0 23 * * *","retryConfig":{"retryCount":null,"maxDoublings":null,"maxRetryDuration":null,"maxBackoffDuration":null,"minBackoffDuration":null},"timeZone":"America/Sao_Paulo"},"labels":{},"entryPoint":"snapshotDailyEvoData"},"triggerSnapshot":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"triggerSnapshot"},"deleteEvoSnapshot":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"deleteEvoSnapshot"},"getPublicRanking":{"platform":"gcfv1","labels":{},"availableMemoryMb":1024,"timeoutSeconds":540,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getPublicRanking"},"getTodaysTotalEntries":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":120,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getTodaysTotalEntries"},"getRegisteredUsersByEvoId":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"getRegisteredUsersByEvoId"},"updateStudentBadges":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"updateStudentBadges"},"grantAdminRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"grantAdminRole"},"grantInstructorRole":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"grantInstructorRole"}},"specVersion":"v1alpha1","requiredAPIs":[{"api":"cloudscheduler.googleapis.com","reason":"Needed for scheduled functions."}],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: updateUserPassword, getMemberData, listAllMembers, updateMemberData, inviteStudent, updateStudentPermissions, getActiveContractsCount, getEvoUnits, getPublicEvoUnits, getActivitiesSchedule, getDailyEntries, getContractsEvolution, snapshotDailyEvoData, triggerSnapshot, deleteEvoSnapshot, getPublicRanking, getTodaysTotalEntries, getRegisteredUsersByEvoId, updateStudentBadges, grantAdminRole, grantInstructorRole. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateUserPassword, getMemberData, listAllMembers, updateMemberData, inviteStudent, updateStudentPermissions, getActiveContractsCount, getEvoUnits, getPublicEvoUnits, getActivitiesSchedule, getDailyEntries, getContractsEvolution, snapshotDailyEvoData, triggerSnapshot, deleteEvoSnapshot, getPublicRanking, getTodaysTotalEntries, getRegisteredUsersByEvoId, updateStudentBadges, grantAdminRole, grantInstructorRole."}}
[info] ✔  functions[us-central1-updateUserPassword]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/updateUserPassword). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/updateUserPassword)."}}
[info] ✔  functions[us-central1-getMemberData]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getMemberData). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getMemberData)."}}
[info] ✔  functions[us-central1-listAllMembers]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/listAllMembers). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/listAllMembers)."}}
[info] ✔  functions[us-central1-updateMemberData]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/updateMemberData). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/updateMemberData)."}}
[info] ✔  functions[us-central1-inviteStudent]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/inviteStudent). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/inviteStudent)."}}
[info] ✔  functions[us-central1-updateStudentPermissions]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/updateStudentPermissions). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/updateStudentPermissions)."}}
[info] ✔  functions[us-central1-getActiveContractsCount]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getActiveContractsCount). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getActiveContractsCount)."}}
[info] ✔  functions[us-central1-getEvoUnits]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getEvoUnits). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getEvoUnits)."}}
[info] ✔  functions[us-central1-getPublicEvoUnits]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getPublicEvoUnits). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getPublicEvoUnits)."}}
[info] ✔  functions[us-central1-getActivitiesSchedule]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getActivitiesSchedule). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getActivitiesSchedule)."}}
[info] ✔  functions[us-central1-getDailyEntries]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getDailyEntries). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getDailyEntries)."}}
[info] ✔  functions[us-central1-getContractsEvolution]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getContractsEvolution). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getContractsEvolution)."}}
[info] i  functions[us-central1-snapshotDailyEvoData]: function ignored because the pubsub emulator does not exist or is not running. {"metadata":{"emulator":{"name":"functions"},"message":"function ignored because the pubsub emulator does not exist or is not running."}}
[info] ✔  functions[us-central1-triggerSnapshot]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/triggerSnapshot). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/triggerSnapshot)."}}
[info] ✔  functions[us-central1-deleteEvoSnapshot]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/deleteEvoSnapshot). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/deleteEvoSnapshot)."}}
[info] ✔  functions[us-central1-getPublicRanking]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getPublicRanking). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getPublicRanking)."}}
[info] ✔  functions[us-central1-getTodaysTotalEntries]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getTodaysTotalEntries). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getTodaysTotalEntries)."}}
[info] ✔  functions[us-central1-getRegisteredUsersByEvoId]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/getRegisteredUsersByEvoId). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/getRegisteredUsersByEvoId)."}}
[info] ✔  functions[us-central1-updateStudentBadges]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/updateStudentBadges). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/updateStudentBadges)."}}
[info] ✔  functions[us-central1-grantAdminRole]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/grantAdminRole). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/grantAdminRole)."}}
[info] ✔  functions[us-central1-grantInstructorRole]: http function initialized (http://localhost:5000/intranet-kihap/us-central1/grantInstructorRole). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://localhost:5000/intranet-kihap/us-central1/grantInstructorRole)."}}
[debug] [2025-10-22T10:55:34.634Z] Functions emulator received unknown request at path /
[debug] [2025-10-22T10:55:34.699Z] Functions emulator received unknown request at path /favicon.ico
