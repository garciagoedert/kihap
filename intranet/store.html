<!DOCTYPE html>
<html lang="pt-BR" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kihap - Store</title>
    <link rel="icon" href="https://kihap.com.br/wp-content/uploads/2021/02/logo-wh.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css?v=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="log.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Enhanced Tab Styles */
        .tab-btn,
        .subtab-btn {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem 0.5rem 0 0;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .tab-btn:hover,
        .subtab-btn:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: translateY(-2px);
        }

        .tab-btn.active,
        .tab-btn.text-white {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(37, 99, 235, 0.15) 100%);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 80%;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            border-radius: 3px 3px 0 0;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tab-btn.text-white::before,
        .tab-btn.active::before {
            transform: translateX(-50%) scaleX(1);
        }

        .subtab-btn {
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .subtab-btn.text-white {
            background: rgba(59, 130, 246, 0.15);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
        }

        .tab-content {
            transition: opacity 0.2s ease-in-out;
        }

        .tab-content.hidden {
            opacity: 0;
            pointer-events: none;
            display: none;
        }

        /* Toggle Switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #4A90E2;
        }

        .toggle-checkbox:checked+.toggle-label {
            background-color: #4A90E2;
        }

        /* Desktop UI Improvements */
        .kpi-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            background: linear-gradient(145deg, #2a2a2a, #222);
            border: 1px solid #333;
        }

        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            border-color: #4A90E2;
        }

        /* Table Styles */
        thead tr {
            background-color: #111;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            color: #9ca3af;
        }

        tbody tr {
            transition: background-color 0.15s ease;
        }

        tbody tr:hover {
            background-color: #27272a !important;
        }

        /* Responsive Table CSS (Mobile) */
        @media (max-width: 768px) {

            table,
            thead,
            tbody,
            th,
            td,
            tr {
                display: block;
            }

            thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }

            tr {
                border: 1px solid #374151;
                margin-bottom: 1rem;
                border-radius: 0.5rem;
                background-color: #1f2937;
                padding: 1rem;
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            td {
                border: none;
                position: relative;
                padding: 0 !important;
                text-align: left;
                display: flex;
                flex-direction: column;
            }

            td:last-child {
                border-bottom: none;
            }

            td:before {
                position: relative;
                top: 0;
                left: 0;
                width: auto;
                padding-right: 0;
                white-space: nowrap;
                text-align: left;
                font-weight: 600;
                color: #9ca3af;
                font-size: 0.75rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
                margin-bottom: 0.25rem;
                content: attr(data-label);
            }

            td[data-label="A√ß√µes"],
            td[data-label="Link"] {
                flex-direction: row;
                align-items: center;
                gap: 0.5rem;
            }

            td[data-label="A√ß√µes"]:before,
            td[data-label="Link"]:before {
                display: block;
            }
        }
    </style>
</head>

<body class="bg-[#111111] text-gray-200 h-screen">
    <div id="sidebar-container"></div>
    <div id="sidebar-backdrop" class="fixed inset-0 bg-black/50 z-30 hidden"></div>

    <main id="main-content" class="flex-1 flex flex-col overflow-y-auto transition-all duration-300 ease-in-out">
        <div id="header-container"></div>

        <div class="flex-grow p-4 md:p-6 lg:p-8 flex flex-col">
            <div class="flex items-center justify-between mb-6">
                <h1 class="text-2xl font-bold">Store</h1>
            </div>

            <!-- Tabs -->
            <div class="mb-6 border-b border-gray-700">
                <nav class="flex space-x-4 overflow-x-auto pb-2" aria-label="Tabs">
                    <button id="tab-sales-log" class="tab-btn text-white px-3 py-2 text-sm font-medium flex-shrink-0">
                        üìä Log de Vendas
                    </button>
                    <button id="tab-manage-products"
                        class="tab-btn text-gray-400 hover:text-white hover:border-gray-500 px-3 py-2 text-sm font-medium flex-shrink-0">
                        üì¶ Produtos
                    </button>
                    <button id="tab-marketing"
                        class="tab-btn text-gray-400 hover:text-white hover:border-gray-500 px-3 py-2 text-sm font-medium flex-shrink-0">
                        üéØ Marketing
                    </button>
                    <button id="tab-events"
                        class="tab-btn text-gray-400 hover:text-white hover:border-gray-500 px-3 py-2 text-sm font-medium flex-shrink-0">
                        üé´ Eventos
                    </button>
                </nav>
            </div>

            <!-- Sales Log Content -->
            <div id="content-sales-log" class="tab-content">
                <!-- KPIs -->
                <div id="store-kpi-container"
                    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-6">
                    <!-- Store KPI Cards will be injected here by JavaScript -->
                </div>
                <!-- Filters -->
                <div class="bg-[#1a1a1a] p-6 rounded-xl shadow-lg mb-8 border border-[#333]">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="lg:col-span-2">
                            <label for="search-input"
                                class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 block">Buscar</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-500"></i>
                                </div>
                                <input type="text" id="search-input" placeholder="Nome ou e-mail do cliente..."
                                    class="w-full pl-10 pr-3 py-2.5 text-white bg-[#2a2a2a] border border-[#444] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-500">
                            </div>
                        </div>
                        <div>
                            <label for="filter-unit"
                                class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 block">Unidade</label>
                            <div class="relative">
                                <select id="filter-unit"
                                    class="w-full pl-3 pr-10 py-2.5 text-white bg-[#2a2a2a] border border-[#444] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none transition-all duration-200">
                                    <option value="">Todas as Unidades</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                    <i class="fas fa-chevron-down text-gray-500 text-xs"></i>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="filter-product"
                                class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 block">Produto</label>
                            <div class="relative">
                                <select id="filter-product"
                                    class="w-full pl-3 pr-10 py-2.5 text-white bg-[#2a2a2a] border border-[#444] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none transition-all duration-200">
                                    <option value="">Todos os Produtos</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                    <i class="fas fa-chevron-down text-gray-500 text-xs"></i>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="filter-date"
                                class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 block">Data</label>
                            <div class="relative">
                                <input type="date" id="filter-date"
                                    class="w-full pl-3 pr-3 py-2.5 text-white bg-[#2a2a2a] border border-[#444] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
                            </div>
                        </div>
                        <div>
                            <label for="filter-status"
                                class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 block">Status</label>
                            <div class="relative">
                                <select id="filter-status"
                                    class="w-full pl-3 pr-10 py-2.5 text-white bg-[#2a2a2a] border border-[#444] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none transition-all duration-200">
                                    <option value="">Todos os Status</option>
                                    <option value="paid">Pago</option>
                                    <option value="pending">Pendente</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                    <i class="fas fa-chevron-down text-gray-500 text-xs"></i>
                                </div>
                            </div>
                        </div>
                        <div class="lg:col-span-2 flex items-end justify-end gap-3">
                            <button id="add-manual-sale-btn"
                                class="px-5 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#1a1a1a] transition-all duration-200 shadow-lg shadow-blue-600/20">
                                <i class="fas fa-plus mr-2"></i>Venda Manual
                            </button>
                            <a href="sales-history.html" id="view-all-sales-btn"
                                class="px-5 py-2.5 text-sm font-medium text-gray-300 bg-[#2a2a2a] border border-[#444] rounded-lg hover:bg-[#333] hover:text-white focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-[#1a1a1a] transition-all duration-200">
                                <i class="fas fa-history mr-2"></i>Hist√≥rico
                            </a>
                            <button id="export-btn"
                                class="px-5 py-2.5 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-[#1a1a1a] transition-all duration-200 shadow-lg shadow-green-600/20">
                                <i class="fas fa-file-excel mr-2"></i>Exportar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sales Table -->
                <div class="bg-[#1a1a1a] p-6 rounded-lg shadow-lg overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="border-b border-gray-700">
                                <th class="p-4">Nome do Cliente</th>
                                <th class="p-4">Email</th>
                                <th class="p-4">Telefone</th>
                                <th class="p-4">Produto</th>
                                <th class="p-4">Programa</th>
                                <th class="p-4">Gradua√ß√£o</th>
                                <th class="p-4">Valor</th>
                                <th class="p-4">Status do Pagamento</th>
                                <th class="p-4">Data da Compra</th>
                            </tr>
                        </thead>
                        <tbody id="sales-table-body">
                            <tr>
                                <td colspan="9" class="text-center p-8">Carregando vendas...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Manage Products Content -->
            <div id="content-manage-products" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Add/Edit Product Form -->
                    <div class="lg:col-span-1 bg-[#1a1a1a] p-6 rounded-lg shadow-lg">
                        <h2 id="product-form-title" class="text-xl font-bold mb-4">Adicionar Novo Produto</h2>
                        <form id="product-form">
                            <input type="hidden" id="product-id">
                            <div class="mb-4">
                                <label for="product-name" class="block text-sm font-medium text-gray-400">Nome do
                                    Produto</label>
                                <input type="text" id="product-name"
                                    class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    required>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-400 mb-2">Tipo de Pre√ßo</label>
                                <div class="flex items-center space-x-4">
                                    <label class="flex items-center">
                                        <input type="radio" name="price-type" value="fixed"
                                            class="form-radio text-blue-500 bg-gray-700 border-gray-600" checked>
                                        <span class="ml-2">Pre√ßo Fixo</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="price-type" value="variable"
                                            class="form-radio text-blue-500 bg-gray-700 border-gray-600">
                                        <span class="ml-2">Pre√ßo Vari√°vel</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="price-type" value="lotes"
                                            class="form-radio text-blue-500 bg-gray-700 border-gray-600">
                                        <span class="ml-2">Lotes</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Fixed Price Input -->
                            <div id="fixed-price-container" class="mb-4">
                                <label for="product-price" class="block text-sm font-medium text-gray-400">Pre√ßo (em
                                    centavos)</label>
                                <input type="number" id="product-price" name="product-price"
                                    placeholder="Ex: 1000 para R$10,00"
                                    class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>

                            <!-- Variable Prices Input -->
                            <div id="variable-prices-container" class="mb-4 hidden">
                                <label class="block text-sm font-medium text-gray-400">Varia√ß√µes de Pre√ßo</label>
                                <div id="price-variants-list" class="space-y-2 mt-1">
                                    <!-- Dynamic price variants will be added here -->
                                </div>
                                <button type="button" id="add-price-variant-btn"
                                    class="mt-2 px-3 py-1 text-sm font-medium text-white bg-gray-600 rounded-md hover:bg-gray-500">
                                    <i class="fas fa-plus mr-1"></i> Adicionar Varia√ß√£o
                                </button>
                            </div>

                            <!-- Lotes Input -->
                            <div id="lotes-container" class="mb-4 hidden">
                                <label class="block text-sm font-medium text-gray-400">Lotes</label>
                                <div id="lotes-list" class="space-y-2 mt-1">
                                    <!-- Dynamic lotes will be added here -->
                                </div>
                                <button type="button" id="add-lote-btn"
                                    class="mt-2 px-3 py-1 text-sm font-medium text-white bg-gray-600 rounded-md hover:bg-gray-500">
                                    <i class="fas fa-plus mr-1"></i> Adicionar Lote
                                </button>
                            </div>

                            <div class="mb-4">
                                <label for="product-description"
                                    class="block text-sm font-medium text-gray-400">Descri√ß√£o</label>
                                <textarea id="product-description" rows="3"
                                    class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                            </div>
                            <div class="mb-4">
                                <label for="product-image" class="block text-sm font-medium text-gray-400">Imagem do
                                    Produto</label>
                                <input type="file" id="product-image"
                                    class="w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600" />
                            </div>
                            <div class="mb-4">
                                <label for="product-visible"
                                    class="flex items-center justify-between text-sm font-medium text-gray-400">
                                    <span>Vis√≠vel para Venda</span>
                                    <div
                                        class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                        <input type="checkbox" name="product-visible" id="product-visible"
                                            class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" />
                                        <label for="product-visible"
                                            class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-600 cursor-pointer"></label>
                                    </div>
                                </label>
                            </div>
                            <div class="mb-4">
                                <label for="product-available"
                                    class="flex items-center justify-between text-sm font-medium text-gray-400">
                                    <span>Dispon√≠vel (em estoque)</span>
                                    <div
                                        class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                        <input type="checkbox" name="product-available" id="product-available"
                                            class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" />
                                        <label for="product-available"
                                            class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-600 cursor-pointer"></label>
                                    </div>
                                </label>
                            </div>
                            <div class="mb-4">
                                <label for="product-public"
                                    class="flex items-center justify-between text-sm font-medium text-gray-400">
                                    <span>Acesso P√∫blico</span>
                                    <div
                                        class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                        <input type="checkbox" name="product-public" id="product-public"
                                            class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" />
                                        <label for="product-public"
                                            class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-600 cursor-pointer"></label>
                                    </div>
                                </label>
                            </div>
                            <div class="mb-4">
                                <label for="product-is-ticket"
                                    class="flex items-center justify-between text-sm font-medium text-gray-400">
                                    <span>√â um Ingresso?</span>
                                    <div
                                        class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                        <input type="checkbox" name="product-is-ticket" id="product-is-ticket"
                                            class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" />
                                        <label for="product-is-ticket"
                                            class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-600 cursor-pointer"></label>
                                    </div>
                                </label>
                            </div>
                            <div class="mb-4">
                                <label for="product-availability-date"
                                    class="block text-sm font-medium text-gray-400">Dispon√≠vel at√©</label>
                                <input type="date" id="product-availability-date"
                                    class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div class="mb-4">
                                <label for="recommended-products"
                                    class="block text-sm font-medium text-gray-400">Produtos Recomendados (Compre
                                    Junto)</label>
                                <select id="recommended-products" multiple
                                    class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32">
                                    <!-- Options will be populated by JS -->
                                </select>
                            </div>
                            <div class="flex items-center justify-between w-full">
                                <button type="button" id="send-bulk-emails-btn"
                                    class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-500 hidden">
                                    <i class="fas fa-envelope mr-2"></i>Enviar Ingressos em Massa
                                </button>
                                <div class="flex items-center space-x-2">
                                    <button type="button" id="cancel-edit-btn"
                                        class="px-4 py-2 text-sm font-medium text-gray-300 bg-gray-600 rounded-md hover:bg-gray-500 hidden">Cancelar</button>
                                    <button type="submit" id="save-product-btn"
                                        class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500">Salvar
                                        Produto</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!-- Products List -->
                    <div class="lg:col-span-2 bg-[#1a1a1a] p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl font-bold mb-4">Produtos Cadastrados</h2>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr class="border-b border-gray-700">
                                        <th class="p-4">Nome</th>
                                        <th class="p-4">Pre√ßo</th>
                                        <th class="p-4">Status</th>
                                        <th class="p-4">Link</th>
                                        <th class="p-4">A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody id="products-table-body">
                                    <tr>
                                        <td colspan="5" class="text-center p-8">Carregando produtos...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Marketing Content (Banners + Coupons) -->
            <div id="content-marketing" class="tab-content hidden">
                <div class="mb-6">
                    <div class="border-b border-gray-700">
                        <nav class="flex space-x-4" aria-label="Marketing Tabs">
                            <button id="subtab-banners" class="subtab-btn text-white px-3 py-2 text-sm font-medium">
                                Banners
                            </button>
                            <button id="subtab-coupons"
                                class="subtab-btn text-gray-400 hover:text-white hover:border-gray-500 px-3 py-2 text-sm font-medium">
                                Cupons
                            </button>
                        </nav>
                    </div>
                </div>

                <!-- Banners Sub-content -->
                <div id="content-manage-banners" class="marketing-subcontent">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Add/Edit Banner Form -->
                        <div class="lg:col-span-1 bg-[#1a1a1a] p-6 rounded-lg shadow-lg">
                            <h2 id="banner-form-title" class="text-xl font-bold mb-4">Adicionar Novo Banner</h2>
                            <form id="banner-form">
                                <input type="hidden" id="banner-id">
                                <div class="mb-4">
                                    <label for="banner-image" class="block text-sm font-medium text-gray-400">Imagem do
                                        Banner</label>
                                    <input type="file" id="banner-image"
                                        class="w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"
                                        required />
                                </div>
                                <div class="mb-4">
                                    <label for="banner-link" class="block text-sm font-medium text-gray-400">Link
                                        (opcional)</label>
                                    <input type="url" id="banner-link"
                                        class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="mb-4">
                                    <label for="banner-active"
                                        class="flex items-center justify-between text-sm font-medium text-gray-400">
                                        <span>Ativo</span>
                                        <div
                                            class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                            <input type="checkbox" name="banner-active" id="banner-active"
                                                class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" />
                                            <label for="banner-active"
                                                class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-600 cursor-pointer"></label>
                                        </div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-end space-x-2">
                                    <button type="button" id="cancel-banner-edit-btn"
                                        class="px-4 py-2 text-sm font-medium text-gray-300 bg-gray-600 rounded-md hover:bg-gray-500 hidden">Cancelar</button>
                                    <button type="submit" id="save-banner-btn"
                                        class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500">Salvar
                                        Banner</button>
                                </div>
                            </form>
                        </div>
                        <!-- Banners List -->
                        <div class="lg:col-span-2 bg-[#1a1a1a] p-6 rounded-lg shadow-lg">
                            <h2 class="text-xl font-bold mb-4">Banners Cadastrados</h2>
                            <div id="banners-list" class="space-y-4">
                                <!-- Banners will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coupons Sub-content -->
                <div id="content-manage-coupons" class="marketing-subcontent hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Add/Edit Coupon Form -->
                        <div class="lg:col-span-1 bg-[#1a1a1a] p-6 rounded-lg shadow-lg">
                            <h2 id="coupon-form-title" class="text-xl font-bold mb-4">Adicionar Novo Cupom</h2>
                            <form id="coupon-form">
                                <input type="hidden" id="coupon-id">
                                <div class="mb-4">
                                    <label for="coupon-code" class="block text-sm font-medium text-gray-400">C√≥digo do
                                        Cupom</label>
                                    <input type="text" id="coupon-code"
                                        class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        required>
                                </div>
                                <div class="mb-4">
                                    <label for="coupon-type" class="block text-sm font-medium text-gray-400">Tipo de
                                        Desconto</label>
                                    <select id="coupon-type"
                                        class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="percentage">Porcentagem</option>
                                        <option value="fixed">Valor Fixo</option>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label for="coupon-value" class="block text-sm font-medium text-gray-400">Valor do
                                        Desconto</label>
                                    <input type="number" id="coupon-value"
                                        class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        required>
                                </div>
                                <div class="mb-4">
                                    <label for="coupon-expiry" class="block text-sm font-medium text-gray-400">Data de
                                        Validade</label>
                                    <input type="date" id="coupon-expiry"
                                        class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="flex items-center justify-end space-x-2">
                                    <button type="button" id="cancel-coupon-edit-btn"
                                        class="px-4 py-2 text-sm font-medium text-gray-300 bg-gray-600 rounded-md hover:bg-gray-500 hidden">Cancelar</button>
                                    <button type="submit" id="save-coupon-btn"
                                        class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500">Salvar
                                        Cupom</button>
                                </div>
                            </form>
                        </div>
                        <!-- Coupons List -->
                        <div class="lg:col-span-2 bg-[#1a1a1a] p-6 rounded-lg shadow-lg">
                            <h2 class="text-xl font-bold mb-4">Cupons Cadastrados</h2>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left">
                                    <thead>
                                        <tr class="border-b border-gray-700">
                                            <th class="p-4">C√≥digo</th>
                                            <th class="p-4">Tipo</th>
                                            <th class="p-4">Valor</th>
                                            <th class="p-4">Validade</th>
                                            <th class="p-4">A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody id="coupons-table-body">
                                        <tr>
                                            <td colspan="5" class="text-center p-8">Carregando cupons...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Events Content -->
            <div id="content-events" class="tab-content hidden">
                <div class="bg-[#1a1a1a] p-4 rounded-lg shadow-lg mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="event-product-filter" class="text-sm font-medium text-gray-400">Filtrar por
                                Evento (Produto)</label>
                            <select id="event-product-filter"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Todos os Eventos</option>
                            </select>
                        </div>
                        <div>
                            <label for="event-search-input" class="text-sm font-medium text-gray-400">Buscar por
                                Nome/Email:</label>
                            <input type="text" id="event-search-input" placeholder="Nome ou e-mail do cliente..."
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                </div>
                <div class="bg-[#1a1a1a] p-6 rounded-lg shadow-lg overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="border-b border-gray-700">
                                <th class="p-4">Nome do Cliente</th>
                                <th class="p-4">Email</th>
                                <th class="p-4">Produto (Evento)</th>
                                <th class="p-4">Data do Check-in</th>
                            </tr>
                        </thead>
                        <tbody id="events-table-body">
                            <tr>
                                <td colspan="4" class="text-center p-8">Carregando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script type="module" src="auth.js"></script>
    <script type="module">
        import { loadComponents } from './common-ui.js';
        import { setupStorePage } from './store.js';

        document.addEventListener('DOMContentLoaded', () => {
            loadComponents(() => {
                setupStorePage();
            });
        });
    </script>

    <!-- Sale Details Modal -->
    <div id="sale-details-modal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-[#1a1a1a] p-8 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Detalhes da Venda</h2>
                <button id="close-modal-btn" class="text-gray-400 hover:text-white">&times;</button>
            </div>
            <div id="modal-content" class="space-y-4">
                <!-- Content will be populated by JS -->
            </div>

            <!-- Email Logs Section -->
            <div id="email-logs-section" class="mt-6 pt-6 border-t border-gray-700 hidden">
                <h3 class="text-lg font-bold mb-3">üìß Hist√≥rico de Emails</h3>
                <div id="email-logs-list" class="space-y-2">
                    <!-- Email logs will be loaded here -->
                </div>
            </div>

            <div class="mt-6 flex justify-between items-center">
                <button id="resend-email-btn-modal"
                    class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500">
                    <i class="fas fa-paper-plane mr-2"></i><span id="resend-email-text">Renviar Email</span>
                </button>
                <button id="delete-sale-btn-modal"
                    class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-500">Apagar
                    Log</button>
            </div>
        </div>
    </div>

    <!-- Manual Sale Modal -->
    <div id="manual-sale-modal"
        class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden">
        <div class="bg-[#1a1a1a] p-8 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <form id="manual-sale-form">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Adicionar Venda Manual</h2>
                    <button type="button" id="close-manual-sale-modal-btn"
                        class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Coluna 1: Dados do Cliente e Produto -->
                    <div class="space-y-4">
                        <div>
                            <label for="manual-sale-user-name" class="block text-sm font-medium text-gray-400">Nome do
                                Cliente</label>
                            <input type="text" id="manual-sale-user-name"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                        <div>
                            <label for="manual-sale-user-email"
                                class="block text-sm font-medium text-gray-400">Email</label>
                            <input type="email" id="manual-sale-user-email"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="manual-sale-user-phone"
                                class="block text-sm font-medium text-gray-400">Telefone</label>
                            <input type="tel" id="manual-sale-user-phone"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="manual-sale-user-cpf"
                                class="block text-sm font-medium text-gray-400">CPF</label>
                            <input type="text" id="manual-sale-user-cpf"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="manual-sale-user-graduacao"
                                class="block text-sm font-medium text-gray-400">Gradua√ß√£o</label>
                            <input type="text" id="manual-sale-user-graduacao"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="manual-sale-user-unit"
                                class="block text-sm font-medium text-gray-400">Unidade</label>
                            <select id="manual-sale-user-unit"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></select>
                        </div>

                        <!-- Produtos -->
                        <div class="border-t border-gray-700 pt-4 mt-4">
                            <h3 class="text-lg font-medium text-white mb-2">Produtos</h3>
                            <div id="manual-sale-products-container" class="space-y-3">
                                <!-- Linha de produto ser√° adicionada dinamicamente aqui -->
                            </div>
                            <button type="button" id="add-manual-sale-product-btn"
                                class="mt-2 px-3 py-1 text-sm font-medium text-white bg-gray-600 rounded-md hover:bg-gray-500">
                                <i class="fas fa-plus mr-1"></i> Adicionar Produto
                            </button>
                        </div>

                        <div>
                            <label for="manual-sale-amount" class="block text-sm font-medium text-gray-400">Valor Total
                                (em centavos)</label>
                            <input type="number" id="manual-sale-amount" placeholder="Calculado automaticamente"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                        </div>
                    </div>

                    <!-- Coluna 2: Detalhes do Pagamento -->
                    <div class="space-y-4">
                        <div>
                            <label for="manual-sale-payment-method"
                                class="block text-sm font-medium text-gray-400">M√©todo de Pagamento</label>
                            <select id="manual-sale-payment-method"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                                <option value="card">Cart√£o</option>
                                <option value="pix">PIX</option>
                                <option value="cash">Dinheiro</option>
                                <option value="credit">Cr√©dito Interno</option>
                            </select>
                        </div>

                        <!-- Campos para Cart√£o -->
                        <div id="manual-sale-card-details" class="space-y-4">
                            <div>
                                <label for="manual-sale-card-last4" class="block text-sm font-medium text-gray-400">4
                                    √öltimos D√≠gitos do Cart√£o</label>
                                <input type="text" id="manual-sale-card-last4"
                                    class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    maxlength="4">
                            </div>
                            <div>
                                <label for="manual-sale-card-brand"
                                    class="block text-sm font-medium text-gray-400">Bandeira</label>
                                <input type="text" id="manual-sale-card-brand"
                                    class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label for="manual-sale-card-auth"
                                    class="block text-sm font-medium text-gray-400">C√≥digo de Autoriza√ß√£o</label>
                                <input type="text" id="manual-sale-card-auth"
                                    class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>

                        <!-- Campos para PIX e Dinheiro (informativo) -->
                        <div id="manual-sale-pix-details" class="hidden">
                            <p class="text-sm text-gray-400">Registro de pagamento via PIX.</p>
                        </div>
                        <div id="manual-sale-cash-details" class="hidden">
                            <p class="text-sm text-gray-400">Registro de pagamento em dinheiro.</p>
                        </div>

                        <!-- Detalhes Adicionais -->
                        <div class="border-t border-gray-700 pt-4 mt-4">
                            <label for="manual-sale-details" class="block text-sm font-medium text-gray-400">Detalhes
                                Adicionais</label>
                            <textarea id="manual-sale-details" rows="3"
                                class="w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>
                    </div>
                </div>

                <div class="mt-8 flex justify-end space-x-4">
                    <button type="button" id="cancel-manual-sale-btn"
                        class="px-6 py-2 text-sm font-medium text-gray-300 bg-gray-600 rounded-md hover:bg-gray-500">Cancelar</button>
                    <button type="submit" id="save-manual-sale-btn"
                        class="px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-500">Salvar
                        Venda</button>
                </div>
            </form>
        </div>
    </div>
</body>

</html>